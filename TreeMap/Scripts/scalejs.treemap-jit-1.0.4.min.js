define("scalejs.treemap-jit/colors",["scalejs!core","color-scheme"],function(e,n){function t(e){return e=o({hue:360*Math.random(),variation:"default"},e),a.from_hue(e.hue).variation(e.variation),a.colors()}function r(){var e,n=1,r=2;return function(a){return a=a||{},n>r&&(n=1,r=2*r),a.hue=360*n/r,a.hue=a.hue>80&&a.hue<160?a.hue+100:a.hue,e=t(a),n+=2,e}}var a=new n,o=e.object.merge;return{generateGradient:t,generateVariedGradient:r}}),define(["scalejs!core","knockout","jit","./scalejs.treemap-jit/colors","scalejs.mvvm"],function(e,n,t,r){function a(){var e="scalejs_treemap_"+s;return s+=1,e}function o(e,n){return function(){return{name:n,data:e}}}function i(e,r,i,s,f){function p(e,n){return 0===n.length?(e.children=[],e.data={$area:c(e[P.areaPath])},e.id=e.id||a(),e):(e.id=e.id||a(),c(e[n[0]]).reduce(function(e,t){var r=p(t,n.slice(1));return e.children.push(r),e.data.$area+=r.data.$area,e},d(e,{children:[],data:{$area:0}})))}function m(e){H(e)}function h(){H.enterParent()}function b(e,t){n.cleanNode(e),n.bindingHandlers.template.update(e,o(t,P.nodeTipTemplate),i,s,f)}function g(e,r){e.innerHTML=r.name;var a=e.style;a.display="",a.border="1px solid transparent",e.onmouseover=function(){a.border="1px solid #9FD4FF"},e.onmouseout=function(){a.border="1px solid transparent"},r._depth>P.levels.length-1&&(P.itemTemplate&&(n.cleanNode(e),n.bindingHandlers.template.update(e,o(r,P.itemTemplate),i,s,f)),k=t.json.getParent(T(),r.id).colors,k||(k=l(),t.json.getParent(T(),r.id).colors=k),k=t.json.getParent(T(),r.id).colors,r.data.$color="#"+k[[0,1,3][0|3*Math.random()]])}var v,j,T,P=r(),k=l(),H=P.selectedItem||n.observable();T=n.computed(function(){return p(P.data,P.levels)}),H.enterParent=function(){v.out(),H(t.json.getParent(T(),H().id))},e.id=e.id||a(),j=d({injectInto:e,titleHeight:15,animate:!0,offset:1,Events:{enable:!0,onClick:m,onRightClick:h},duration:1e3,Tips:{enable:u(P.nodeTipTemplate),offsetX:20,offsetY:20,onShow:b},onCreateLabel:g},P.options),v=new t.TM.Squarified(j),v.loadJSON(T()),v.refresh(),H(v.graph.getNode(T().id)),P.zoomOnClick&&H.subscribe(function(e){e&&v.enter(v.graph.getNode(e.id))}),T.subscribe(function(e){v.op.morph(e,{type:"fade",duration:1500,type:"replot"})})}var d=e.object.merge,u=e.object.has,c=n.utils.unwrapObservable,s=0,l=r.generateVariedGradient();n.bindingHandlers.treemap={init:i}});