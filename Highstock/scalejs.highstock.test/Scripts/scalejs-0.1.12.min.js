define("scalejs",[],function(){var e=!1,t=typeof window;return t!=="undefined"&&window.console==="undefined"&&(window.console=window.Console),{load:function(t,n,r,i){var s=i.scalejs?i.scalejs.extensions||[]:[],o="scalejs/"+t;n([o],function(t){o==="scalejs/application"?n(s,function(){var o=arguments;n(["scalejs/core"],function(n){!i.isBuild&&!e&&(n.array.iter(o,function(e,t){e!==undefined&&e!==null&&(e.scalejsId=s[t],n.registerExtension(e))}),n.buildCore(),e=!0),r(t)})}):r(t)})}}}),define("scalejs/base.type",[],function(){function e(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function t(e){var n,r,i=arguments.length,s=i-1,o,u,a,f=e;if(i===0)return!1;if(i===1)return e!==null&&e!==n;if(i>2)for(r=0;r<s-1;r+=1){if(!t(f))return!1;f=f[arguments[r+1]]}return o=arguments[s],f===null?o===null||o==="null":f===n?o===n||o==="undefined":o===""?f===o:(u=typeof o,u==="string"?(a=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),a===o):u==="function"?f instanceof o:f===o)}return{is:t,typeOf:e}}),define("scalejs/base.object",["./base.type"],function(e){function n(e){var n,r,i=e,s;if(!t(i))return!1;for(n=1,r=arguments.length;n<r;n+=1){s=arguments[n],i=i[s];if(!t(i))return!1}return!0}function r(e,t){var i;for(i in t)t.hasOwnProperty(i)&&(n(t,i)&&t[i].constructor===Object&&n(e,i)?e[i]=r(e[i],t[i]):e[i]=t[i]);return e}function i(){var e=arguments,t,n=e.length,i={};for(t=0;t<n;t+=1)r(i,e[t]);return i}function s(e){return i({},e)}function o(e,t,i){var s=n(i)?i.split("."):[],o=e,u;for(u=0;u<s.length;u+=1)n(o,s[u])||(o[s[u]]={}),o=o[s[u]];return r(o,t),o}function u(e,t){return n(e)?e:t}var t=e.is;return{has:n,valueOrDefault:u,merge:i,extend:o,clone:s}}),define("scalejs/base.array",["./base.type","./base.object"],function(e,t){function i(e,t){if(n(e,"indexOf","function"))return e.indexOf(t);var r=e.length,i;for(i=0;i<r;i+=1)if(e[i]===t)return i;return-1}function s(e,t){i(e,t)<0&&e.push(t)}function o(e,t){var n=i(e,t);n>-1&&e.splice(n,1)}function u(e){e.splice(0,e.length)}function a(e,t,n){return t=r(t,0),n=r(n,e.length),e.slice(t,n)}function f(e,t,n){var r,i=e.length,s;for(r=0;r<i;r+=1){s=t.call(n,e[r],r,e);if(s===!1)return!1}return!0}function l(e,t,n){var r,i=e.length,s=e.concat();for(r=0;r<i;r+=1)s[r]=t.call(n,e[r],r,e);return s}function c(e,t,n){var r,i=e.length,s=[],o;for(r=0;r<i;r+=1)o=e[r],t.call(n,o,r,e)&&s.push(o);return s}function h(e,t,n){var r,i;for(r=0,i=e.length;r<i;r+=1)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e))return e[r];return null}var n=e.is,r=t.valueOrDefault;return{addOne:s,removeOne:o,removeAll:u,copy:a,indexOf:i,iter:f,map:l,filter:c,find:h}}),define("scalejs/base.dom",[],function(){function e(e){return document.getElementById(e)}function t(e,t){var n=document.createElement("div"),r;n.innerHTML=t;for(r=0;r<n.childNodes.length;r+=1)e.appendChild(n.childNodes[r].cloneNode(!0))}function n(e,t){var n=e,r,i;e&&e.toUpperCase&&(n=e.toUpperCase()),r=document.createElement(n);for(i in t)t.hasOwnProperty(i)&&r.setAttribute(i,t[i]);return r}return{$:e,createElement:n,appendElementHtml:t}}),define("scalejs/base.log",["./base.object"],function(e){function n(e){var n=t(e,"stack")?String(e.stack):"",r=t(e,"message")?e.message:"";return"Error: "+r+"\nStack: "+n}function r(e){t(console)&&console.info(e)}function i(e){t(console)&&console.warn(e)}function s(e){t(console)&&console.error(e)}function o(e){t(console)&&(t(console,"debug")?console.debug(e):r(e))}var t=e.has;return{info:r,warn:i,debug:o,error:s,formatException:n}}),define("scalejs/base",["./base.array","./base.dom","./base.log","./base.object","./base.type"],function(e,t,n,r,i){return{array:e,dom:t,log:n,object:r,type:i}}),define("scalejs/sandbox",["require"],function(e){function t(t,n,r){function l(){return t}function c(){return i(a)?a:(a=o(t),i(a)||(i(r)?(r.setAttribute("id",t),a=r):(a=u("div",{id:t}),document.body.appendChild(a))),a)}function h(t,n){e(["scalejs/application",t],function(e,t){e.registerModule(t,n,c())})}function p(e){var t=c();n.dom.appendElementHtml(t,e)}var i=n.object.has,s=n.type.is,o=n.dom.$,u=n.dom.createElement,a,f;return f=n.object.merge(n.dom,{appendHtml:p}),delete f.appendElementHtml,{getId:l,getBox:c,has:i,is:s,loadModule:h,object:n.object,log:n.log,array:n.array,dom:f}}return t}),define("scalejs/core",["./base","./sandbox"],function(e,t){function l(e){s(a,e)}function c(e,s){if(!n(e))return null;var l=new t(e,f,s),c,h,p;for(c=0;c<a.length;c+=1){h=a[c];try{r(h,"buildSandbox","function")?h.buildSandbox(l):n(h,"sandbox")?i(l,h.sandbox):i(l,h)}catch(d){p=u(d),o('Error: Failed to build sandbox with extension "'+h+'"\n'+p)}}return l}function h(){function m(e){var t,r=[],i=e.dependencies||[];for(t=0;t<i.length;t+=1)n(f,i[t])||r.push(i[t]);return r}var e,t,s=a.slice(),l,c,h,p,d,v;while(s.length>0){e=0,h=s.length;while(e<s.length){l=s[e];if(r(l,"buildCore","function"))try{p=m(l),p.length>0?e+=1:(l.buildCore(f),s.splice(e,1))}catch(g){c=u(g),o('Error: Failed to build core with extension ["'+l.scalejsId+']"\n'+c),s.splice(e,1)}else n(l,"core")?n(l.core,"buildSandbox")?o('Error: Extension ["'+l.scalejsId+'"] has core with buildSandbox defined. '+"buildSandbox must be the top most function "+"of the extension."):(i(f,l.core),s.splice(e,1)):!n(l,"buildSandbox")&&!n(l,"sandbox")?(i(f,l),s.splice(e,1)):s.splice(e,1)}if(h===s.length)break}if(s.length>0){d="",v="";for(e=0;e<s.length;e+=1){d+=s[e].scalejsId+", ",v+=s[e].scalejsId+": [",p=m(s[e]);for(t=0;t<p.length;t+=1)v+=p[t]+", ";v=v.substring(0,v.length-2)+"]\n"}o("Error: Failed to build core with extensions ["+d.substring(0,d.length-2)+"].\n"+"Dependencies graph:\n"+v)}}var n=e.object.has,r=e.type.is,i=e.object.extend,s=e.array.addOne,o=e.log.error,u=e.log.formatException,a=[],f={};return e.object.extend(f,{type:e.type,object:e.object,proxy:e.proxy,array:e.array,log:e.log,dom:e.dom,registerExtension:l,buildSandbox:c,buildCore:h}),f}),define("scalejs/application",["./core"],function(e){function i(t,r,i){var s,o;try{return s=t.newInstance(r,i),e.array.addOne(n,s),s}catch(u){o=e.log.formatException(u),e.log.error('ERROR: Failed to create an instance of module "'+t.getModuleId()+'" with params "'+r+'"\n'+o)}}function s(n,s,o){t.push({module:n,params:s,containerElement:o});if(r==="STARTED"||r==="STARTING"){var u=i(n,s,o);e.object.has(u)&&u.start()}}function o(){var e;for(e=0;e<t.length;e+=1)i(t[e].module,t[e].params,t[e].containerElement)}function u(){r="STARTING",e.log.debug("Starting the application...");var t,i,s=e.array.copy(n);for(t=0;t<s.length;t+=1)try{n[t].start()}catch(o){i=e.log.formatException(o),e.log.error('ERROR: Failed to start module "'+n[t]+'"\n'+i)}r="STARTED",e.log.debug("Application started.")}function a(){r="STOPPING",e.log.debug("Stopping the application...");var t,i;for(t=0;t<n.length;t+=1)try{n[t].end()}catch(s){i=e.log.formatException(s),e.log.error('ERROR: Failed to end module "'+n[t]+'"\n'+i)}e.array.removeAll(n),r="STOPPED",e.log.debug("Application stopped.")}function f(){o(),u(),window.onunload=a}var t=[],n=[],r="STOPPED";return{registerModule:s,startAll:u,stopAll:a,run:f}}),define("scalejs/module",["./core"],function(e){function t(t,n){function i(){return t}function s(i,s){function l(){o(u,"start","function")&&u.start()}function c(){o(u,"end","function")&&u.end()}function h(){return t+"_"+a}var o=e.type.is,u,a,f;return r+=1,a=r,f=e.buildSandbox(h(),s),f.getModuleId=function(){return t},u=n(f,i),{getInstanceId:h,toString:h,start:l,end:c}}var r=0;return{getModuleId:i,toString:i,newInstance:s}}return t});