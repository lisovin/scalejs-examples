define("scalejs.grid-slick/observableDataview",["knockout","slick.grid"],function(e,t){var n=e.isObservable,i=e.computed;return function(e){function r(){return n(e.itemsCount)?e.itemsCount():e.itemsSource().length}function o(){return v}function l(e){return v?v[e]:null}function s(e){var t=v[e];return t?t.metadata:null}function a(){var t=0;n(e.itemsCount)?e.itemsCount.subscribe(function(e){d.notify({previous:t,current:e},null,null),t=e}):i({read:function(){var n=e.itemsSource()||[],i=n.length;d.notify({previous:t,current:i},null,null),t=i}})}function u(){i({read:function(){var t,n,i,r=e.itemsSource()||[],o=[];t=Object.keys(v).map(function(e){return parseInt(e,10)}),n=r.map(function(e){return e.index}),i=t.except(n).toArray(),i.forEach(function(e){delete v[e]}),o=r.filter(function(e){return v[e.index]!==e}).map(function(e){return v[e.index]=e,e.index}),o.length>0&&f.notify({rows:o},null,null)}})}function c(){u(),a()}var d=new t.Event,f=new t.Event,v={};if(!n(e.itemsSource))throw new Error("`itemsSource` must be an observableArray.");return{getLength:r,getItem:l,getItemMetadata:s,getItems:o,subscribe:c,onRowCountChanged:d,onRowsChanged:f}}}),define("text!scalejs.grid-slick/filters.html",[],function(){return'<div id="number_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div> \r\n        <div class="numberFilter">\r\n            Select Value: \r\n               <div>Quick Search: <input data-bind="value: quickSearch, valueUpdate: \'afterkeydown\'" /></div> \r\n               <div class="listFilterBox">\r\n                   <div data-bind="visible: loading" style="width:100%;height:200px;background:black;opacity:.2;position:absolute"></div> \r\n                    <div>\r\n                        <input type="checkbox" data-bind="checked: all" /> \r\n                        <span>Select All</span> \r\n                    </div> \r\n                    <!-- ko foreach: options --> \r\n                    <div>\r\n                        <input type="checkbox" data-bind="checked: selected" /> \r\n                        <span data-bind="text: value"></span> \r\n                    </div> \r\n                    <!-- /ko --> \r\n               </div> \r\n               Show rows with values that: \r\n            <div class="numberFilterBox">\r\n                <div> \r\n                <input type="checkbox" data-bind="checked: notEmpty" />\r\n                <span>Are Not Empty</span> \r\n                </div>\r\n                <div>and</div> \r\n                <div>\r\n                    <select data-bind="value: comparisonA">\r\n                        <option value="EqualTo">Is Equal To</option> \r\n                        <option value="LessThan">Is Less Than</option> \r\n                        <option value="NotEqualTo">Is Not Equal To</option> \r\n                        <option value="GreaterThan">Is Greater Than</option>         \r\n                    </select>\r\n                </div> \r\n                <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" /> \r\n                <div>and</div> \r\n                <div>\r\n                    <select data-bind="value: comparisonB">\r\n                        <option value="EqualTo">Is Equal To</option> \r\n                        <option value="LessThan">Is Less Than</option>\r\n                        <option value="NotEqualTo">Is Not Equal To</option>\r\n                        <option value="GreaterThan">Is Greater Than</option> \r\n                    </select>\r\n                </div> \r\n                <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" /> \r\n            </div> \r\n    </div>  \r\n</div> \r\n \r\n<div id="string_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div> \r\n    <div class="numberFilter">\r\n        Select Value: \r\n        <div>Quick Search:  <input data-bind="value: quickSearch, valueUpdate: \\afterkeydown\\" /></div> \r\n        <div class="listFilterBox">\r\n            <div data-bind="visible: loading" style="width:100%;height:200px;background:black;opacity:.2;position:absolute"></div> \r\n            <div>\r\n                <input type="checkbox" data-bind="checked: all" /> \r\n                <span>Select All</span> \r\n            </div> \r\n            <!-- ko foreach: options --> \r\n            <div>\r\n                <input type="checkbox" data-bind="checked: selected" /> \r\n                <span data-bind="text: value"></span> \r\n            </div> \r\n            <!-- /ko --> \r\n        </div> \r\n        Show rows with values that: \r\n        <div class="numberFilterBox">\r\n            <div>\r\n                <input type="checkbox" data-bind="checked: notEmpty" />\r\n                <span>Are Not Empty</span> \r\n            </div>\r\n            <div>and</div> \r\n            <div>\r\n                <select data-bind="value: comparisonA">\r\n                    <option value="Contains">Contains</option> \r\n                    <option value="StartsWith">Starts With</option> \r\n                    <option value="EndsWith">Ends</option>  \r\n                </select>\r\n            </div> \r\n            <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" /> \r\n            <div>and</div> \r\n            <div>\r\n                <select data-bind="value: comparisonB">\r\n                    <option value="Contains">Contains</option> \r\n                    <option value="StartsWith">Starts With</option>\r\n                    <option value="EndsWith">Ends</option>\r\n                </select>\r\n            </div> \r\n            <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" />\r\n        </div> \r\n    </div>  \r\n</div>  \r\n\r\n'}),define("scalejs.grid-slick/observableFilters",["scalejs!core","jQuery","knockout","text!./filters.html","bPopup","scalejs.statechart-scion","scalejs.mvvm"],function(e,t,n,i){"use strict;";function r(e,i,r,g){function k(e){X.quickSearch.dispose(),e&&e.values&&e.values.length?(P(e.values[0]),G(e.values[0])):(P(""),G("")),X.quickSearch=G.subscribe(S)}function S(t){X.fieldQuickSearch.dispose(),e.quickSearch(m(t)?{op:V,values:[t]}:void 0),X.fieldQuickSearch=e.quickSearch.subscribe(k)}function w(t){X.filter.dispose();var n=e.value.peek()||[],i="string"===e.type?["Contains","StartsWith","EndsWith"]:["EqualTo","LessThan","NotEqualTo","GreaterThan"];t?-1===n.indexOf("In")&&q():A(),-1===n.indexOf("NotEmpty")&&U(!1),(void 0===n[0]||-1===i.indexOf(n[0].op))&&(M.a(i[0]),M.valA(void 0)),(void 0===n[1]||-1===i.indexOf(n[1].op))&&(M.b(i[0]),M.valB(void 0)),n.forEach(function(e,t){"In"===e.op?$().forEach(function(t){t.selected(e.values.indexOf(t.value)>-1)}):"NotEmpty"===e.op?U(!0):0===t?(M.a(e.op),M.valA(e.values[0])):(M.b(e.op),M.valB(e.values[0]))}),W(n),X.filter=W.subscribe(y)}function y(t){X.fieldValue.dispose(),e.value(t),X.fieldValue=e.value.subscribe(w)}function C(e){return{selected:p(Q()),value:m(e)?e.toString():""}}function E(e){W(e||[])}function A(){Q(!0),$().forEach(function(e){e.selected(!0)})}function q(){Q(!1),$().forEach(function(e){e.selected(!1)})}function x(){return $().filter(function(e){return e.selected()})}function T(){M.valA(void 0),M.valB(void 0),U(!1)}function O(){N=t(i.find(".slick-filter")[0]),N.click(function(){function e(e){return z(e),e?N.offset().left-D.width()-g.width+10:N.offset().left+20}D||(D=t('<div class="slick-filter-popup" data-bind="template: { name: popupTemplate, data: $data}"></div>').appendTo("body"),n.applyBindings(R,D.get()[0]));var i=e(N.offset().left+10+D.width()>window.innerWidth),r=N.offset().top+D.height()>window.innerHeight?window.innerHeight-D.height():N.offset().top-10;_("filter.open"),D.bPopup({follow:[!1,!1],position:[i,r],opacity:0,speed:0,onClose:function(){_("filter.close")}});var o=D.find("div")[0];t(o).css("top",N.offset().top-r)})}function j(){return o(s("filter",c(function(){_=this.send,O()}),l("filter.view",l("filter.hidden",c(function(t,n){var i=this;this.quickSearchSub=G.subscribe(function(e){P(e)}),this.quickSub=P.subscribe(function(e){i.quickSearchSub.dispose(),G(e),i.quickSearchSub=G.subscribe(function(e){P(e)}),n("filter.model.all")||_("filter.all")}),w(e.value()),k(e.quickSearch())}),d(function(){this.quickSearchSub.dispose(),this.quickSub.dispose()}),a("filter.open",f("filter.shown"))),l("filter.shown",c(function(){G.valueHasMutated()}),a("filter.close",f("filter.hidden")))),l("filter.model",l("filter.model.all",c(function(){A(),T(),E(F()),X.list=B.subscribe(function(e){e&&_("filter.list")}),X.value=I.subscribe(function(){_("filter.value")})}),d(function(){X.list.dispose(),X.value.dispose()}),l("filter.all.hidden",c(function(){this.quickSubAll=P.subscribe(function(){E(F())})}),d(function(){this.quickSubAll.dispose()}),u("filter.shown",f("filter.all.shown"))),l("filter.all.shown",c(function(){P(G()),X.all=Q.subscribe(function(e){e||_("filter.value")}),X.quick=G.subscribe(function(e){void 0!==e&&(E(F()),P(G()))})}),d(function(){X.all.dispose(),X.quick.dispose()}),u("filter.hidden",f("filter.all.hidden")))),l("filter.model.list",c(function(){Q(!1),T(),E(B()),X.list=B.subscribe(function(e){0===x().length||e?E(e):_("filter.all")}),X.value=I.subscribe(function(){_("filter.value")})}),d(function(){X.list.dispose(),X.value.dispose()}),l("filter.list.hidden",u("filter.shown",f("filter.list.shown"))),l("filter.list.shown",c(function(){P(""),X.all=Q.subscribe(function(){_("filter.all")})}),d(function(){X.all.dispose()}),u("filter.hidden",f("filter.list.hidden")))),l("filter.model.value",c(function(){q(),P(""),E(I()),X.list=B.subscribe(function(e){e&&_("filter.list")}),X.value=I.subscribe(function(e){E(e)})}),d(function(){X.list.dispose(),X.value.dispose()}),l("filter.value.hidden",u("filter.shown",f("filter.value.shown"))),l("filter.value.shown",c(function(){X.all=Q.subscribe(function(){_("filter.all")})}),d(function(){X.all.dispose()}),u("filter.hidden",f("filter.value.hidden")))),a("filter.all",v("filter.model.all")),a("filter.list",v("filter.model.list")),a("filter.value",v("filter.model.value")))))}var I,B,F,L,R,N,D,R,_,W=p([]),G=p(),V=e.quickFilterOp||"StartsWith",M={a:p(),valA:p(),b:p(),valB:p()},U=p(!1),Q=p(!0),H=p(!1),J=e.values,P=p(""),$=h([]),z=p(!1),X={};X.fieldQuickSearch=e.quickSearch.subscribe(k),X.quickSearch=G.subscribe(S),W.equalityComparer=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},X.fieldValue=e.value.subscribe(w),X.filter=W.subscribe(y),J.subscribe(function(e){var t=e.groupJoin($(),"$.toString()","$.value",function(e,t){return t.elementAtOrDefault(0,C(e))}).toArray();$(t)}),I=b(function(){var e=[];return M.valA()&&e.push({op:M.a(),values:[M.valA()]}),M.valB()&&e.push({op:M.b(),values:[M.valB()]}),U()&&e.push({op:"NotEmpty",values:[]}),e.length>0?e:void 0}),B=b(function(){var e=$().filter(function(e){return e.selected()});return e.length>0&&e.length<$().length?[{op:"In",values:e.map(function(e){return e.value})}]:void 0}),F=b(function(){return Q()&&G()?[{op:V,values:[G()]}]:P()?[{op:V,values:[P()]}]:[]}),L=b(function(){return W().length>0}),R={comparisonA:M.a,comparisonB:M.b,valueA:M.valA,valueB:M.valB,quickSearch:G,all:Q,options:$,popupTemplate:"string"===e.type?"string_filter_template":"number_filter_template",value:P,filterOn:L,flipped:z,notEmpty:U,loading:H},n.applyBindings(R,r),filterStatechart=j(),filterStatechart.start()}var o=e.state.builder.statechart,l=e.state.builder.state,s=e.state.builder.parallel,a=e.state.builder.on,u=e.state.builder.whenInStates,c=e.state.builder.onEntry,d=e.state.builder.onExit,f=e.state.builder.goto,v=e.state.builder.gotoInternally,p=n.observable,b=n.computed,h=n.observableArray,g=(n.utils.unwrapObservable,e.mvvm.registerTemplates),m=e.object.has;return g(i),function(){function e(e){e.onHeaderRowCellRendered.subscribe(function(e,n){var i=t(n.node),o=i[0],l=n.column.filter,s='<input type="text" data-bind="value: value, valueUpdate: \'afterkeydown\'"/><div class="slick-filter" data-bind="css: { iconFilterOff: !filterOn(), iconFilterOn: filterOn }"></div>';l&&(i.html(s),r(l,i,o,n.column))})}function n(){}return{init:e,destroy:n}}}),define("scalejs.grid-slick/changesFlasher",["scalejs!core"],function(e){return function(t){function n(e){function n(e){if("string"==typeof t.key)return e[t.key];var n=t.key.map(function(t){return e[t]}).join("_");return n}function i(){var t,i;for(i=0;i<e.getDataLength();i+=1)t=e.getDataItem(i),o(t)&&(s[n(t)]=t)}var s={};t.fields=o(t.fields)?t.fields:e.getColumns().map(function(e){return e.field}),e.getData().onRowsChanged.subscribe(function(a,u){var c=u.rows,d=(new Date).getTime().toString(),f="flash_chaged_"+d,v="flash_changes_"+d,p=r(o(e.getCellCssStyles(f))||{}),b=r(o(e.getCellCssStyles(v))||{});c.forEach(function(i){var r,a,u,c,d;r=e.getDataItem(i),o(r)&&(a=s[n(r)],o(a)&&o(a)&&a!==r&&(u=l(a,r,t.fields),c={},d={},Object.keys(u).forEach(function(e){var t=u[e][0],n=u[e][1];n>t&&(d[e]="slick-cell-changed-up",c[e]="slick-cell-changed"),t>n&&(d[e]="slick-cell-changed-down",c[e]="slick-cell-changed")}),p[i]=c,b[i]=d))}),e.setCellCssStyles(f,p),e.setCellCssStyles(v,b),i(),setTimeout(function(){e.removeCellCssStyles(v)},100),setTimeout(function(){e.removeCellCssStyles(f)},t.speed)})}function i(){}var r=e.object.clone,o=e.object.has,l=e.object.diff,s=e.object.merge;return t=s({speed:1e3,key:"id"},t),{init:n,destroy:i}}}),define("scalejs.grid-slick/slickGrid",["scalejs!core","require","knockout","jQuery","slick.grid","./observableDataview","./observableFilters","./changesFlasher"],function(e,t,n,i,r,o){function l(l,a){function h(){x=o(c(a,{itemsSource:O})),x.onRowCountChanged.subscribe(function(){T.updateRowCount(),T.render()}),x.onRowsChanged.subscribe(function(e,t){var n,i;n=T.getRenderedRange(),i=t.rows.filter(function(e){return e>=n.top&&e<=n.bottom}),i.length>0&&(T.invalidateRows(i),T.render())})}function g(){function e(e){var t=Object.keys(e),n=t[0];T.setSortColumn(n,e[n])}a.customSort&&u(a.sorting)?(T.onSort.subscribe(function(e,t){if(t.multiColumnSort)throw new Error("Multi column sort is not implemented");var n={};n[t.sortCol.field]=t.sortAsc,a.sorting(n)}),e(a.sorting()),a.sorting.subscribe(e),a.sorting.valueHasMutated()):u(a.sorting)?T.onSort.subscribe(function(e,t){var n=t.multiColumnSort?t.sortCols:[t],i={};n.forEach(function(e){i[e.sortCol.field]=e.sortAsc}),a.sorting(i),B(n)}):a.sorting&&T.onSort.subscribe(function(e,t){B(t.multiColumnSort?t.sortCols:[t])})}function m(e){return"string"==typeof e?e.toLowerCase():e}function k(e){return function(t){return d(t,e)?m(t[e]):-Number.MAX_VALUE}}function S(e,t){function n(e,t){return t.sortAsc?e.thenBy(k(t.sortCol.field)):e.thenByDescending(k(t.sortCol.field))}function i(e,t){return t.sortAsc?e.orderBy(k(t.sortCol.field)):e.orderByDescending(k(t.sortCol.field))}var r;return t?(r=i(f(e),t[0]),r=f(t).skip(1).aggregate(r,n),T.setSortColumns(t.map(function(e){return{columnId:e.sortCol.field,sortAsc:e.sortAsc}})),e=r.toArray()):e}function w(){var e,n;if(a.explicitInitialization=!0,T=new r.Grid(l,x,a.columns,a),i(l).data("slickgrid",T),u(a.update)&&a.update.subscribe(function(){T.setColumns(a.columns)}),n=a.columns.filter(function(e){return e.defaultSort})){var o=n.map(function(e){return{sortAsc:"asc"===e.defaultSort,sortCol:e}}),s={};u(a.sorting)&&(o.forEach(function(e){s[e.sortCol.field]=e.sortAsc}),a.sorting(s),a.sorting.subscribe(function(e){B(a.columns.reduce(function(t,n){return void 0!==e[n.field]&&t.push({sortAsc:e[n.field],sortCol:n}),t},[]))})),B(o)}T.setSelectionModel(new r.RowSelectionModel),a.plugins?(e=Object.keys(a.plugins).map(function(e){return["observableFilters","changesFlasher"].indexOf(e)>=0?"./"+e:e}),t(e,function(){var e,t,n;for(e=0;e<arguments.length;e+=1)n=arguments[e],t=n(a.plugins[n.name]),T.registerPlugin(t);T.init()})):T.init()}function y(){x.subscribe()}function C(){u(a.selectedItem)&&T.getSelectionModel().onSelectedRangesChanged.subscribe(function(){var e,t;e=T.getSelectedRows(),t=T.getDataItem(e[0]),a.selectedItem(t)})}function E(){var e;u(a.viewport)&&(T.onViewportChanged.subscribe(function(){var e=T.getViewport();a.viewport(e)}),a.viewport.subscribe(function(t){(t.top>e+2||t.top<e-2)&&(T.scrollRowIntoView(t.top),e=t.top)}))}function A(){e.layout&&e.layout.onLayoutDone(function(){if(T.resizeCanvas(),u(a.viewport)){var e=T.getViewport();a.viewport(e)}})}function q(){function e(e,n){var i;if(evaluate=t[e.op],"In"===e.op||"NotEmpty"===e.op)i=evaluate(n,e.values);else for(var r=0;r<e.values.length&&(i=evaluate(n,b(e.values[r],"").toString()),i);r+=1);return i}var t={EqualTo:function(e,t){return parseFloat(e)===parseFloat(t)},GreaterThan:function(e,t){return parseFloat(e)>parseFloat(t)},LessThan:function(e,t){return parseFloat(e)<parseFloat(t)},NotEqualTo:function(e,t){return parseFloat(e)!==parseFloat(t)},In:function(e,t){return e=b(e,"").toString(),t.contains(e)},Contains:function(e,t){return e=b(e,"").toString().toLowerCase(),t=b(t,"").toString().toLowerCase(),-1!==e.indexOf(t)},StartsWith:function(e,t){return e=b(e,"").toString().toLowerCase(),t=b(t,"").toString().toLowerCase(),0===e.indexOf(t)},EndsWith:function(e,t){return e=b(e,"").toString().toLowerCase(),t=b(t,"").toString().toLowerCase(),-1!==e.indexOf(t,e.length-t.length)},NotEmpty:function(e){return d(e)&&""!==e}};j.forEach(function(t){var n=v();t.filter={type:t.filter.type,quickFilterOp:t.quickFilterOp,value:v(),quickSearch:n,values:v([])},n.subscribe(function(){var i=a.itemsSource().where(function(n){var i=!0;ops=I.filter(function(e){return e.id!==t.id});for(var r=0;r<ops.length&&(i=e(ops[r],n[ops[r].id]),i);r++);return i}).distinct(function(e){return d(e[t.id])?e[t.id]:void 0}).orderBy(k(t.id)).select(function(e){return b(e[t.id],"").toString()});d(n())&&(n().values[0]&&(s=n().values[0].toLowerCase(),i=i.where(function(e){return e=e.toLowerCase(),"Contains"===n.op?-1!==e.indexOf(s):0===e.indexOf(s)})),t.filter.values(i.toArray()))})}),F=p(function(){if(I=j.selectMany(function(e){return e.filter.value()},function(e,t){return{id:e.id,op:t.op,values:t.values}}).toArray(),I.length>0){var t=a.itemsSource().filter(function(t){for(var n,i=0;i<I.length&&(n=e(I[i],t[I[i].id]),n);i++);return n});return t}return a.itemsSource()})}var x,T,O,j,I,B=n.observable(),F=a.itemsSource;j=a.columns.filter(function(e){return e.filter&&!u(e.filter.value)}),j.length>0&&q(),O=a.sorting===!0||u(a.sorting)&&!a.customSort?n.computed(function(){var e=S(F(),B());return e.forEach(function(e,t){e.index=t}),e}):F,h(),w(),y(),C(),g(),E(),A()}function a(e,t,n){var i=n(),r=i.slickGrid;return l(e,r),{controlsDescendantBindings:!0}}var u=n.isObservable,c=e.object.merge,d=e.object.has,f=e.linq.enumerable.from,v=n.observable,p=(n.observableArray,n.computed),b=e.object.valueOrDefault;return{init:a}}),define("scalejs.grid-slick",["./scalejs.grid-slick/slickGrid","knockout","scalejs.linq-linqjs"],function(e,t){t.bindingHandlers.slickGrid=e});